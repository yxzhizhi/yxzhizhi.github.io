<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>eclipse/che | yxzhizhiの博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="portainer下载镜像 docker pull portainer&#x2F;portainer 基于镜像运行容器  docker run -d -p 9000:9000 --restart&#x3D;always -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock --name prtainer  portainer&#x2F;portainer http:&#x2F;&#x2F;172.17.0.1:">
<meta property="og:type" content="article">
<meta property="og:title" content="eclipse&#x2F;che">
<meta property="og:url" content="https://yxzhizhi.github.io/2020/04/05/%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8Eclipse%20Che/index.html">
<meta property="og:site_name" content="yxzhizhiの博客">
<meta property="og:description" content="portainer下载镜像 docker pull portainer&#x2F;portainer 基于镜像运行容器  docker run -d -p 9000:9000 --restart&#x3D;always -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock --name prtainer  portainer&#x2F;portainer http:&#x2F;&#x2F;172.17.0.1:">
<meta property="og:locale">
<meta property="article:published_time" content="2020-04-04T16:00:00.000Z">
<meta property="article:modified_time" content="2021-10-23T12:40:24.249Z">
<meta property="article:author" content="zhanghuo">
<meta property="article:tag" content="che">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="yxzhizhiの博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">yxzhizhiの博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://yxzhizhi.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-安装使用Eclipse Che" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/05/%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8Eclipse%20Che/" class="article-date">
  <time datetime="2020-04-04T16:00:00.000Z" itemprop="datePublished">2020-04-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>►<a class="article-category-link" href="/categories/linux/che/">che</a>►<a class="article-category-link" href="/categories/linux/che/eclipse/">eclipse</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      eclipse/che
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="portainer"><a href="#portainer" class="headerlink" title="portainer"></a>portainer</h3><pre><code>下载镜像
docker pull portainer/portainer
基于镜像运行容器

docker run -d -p 9000:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --name prtainer  portainer/portainer
http://172.17.0.1:8080/dashboard/#/ide/che/wksp-tvqq
http://127.0.0.1:9000/#/networks
up: admin/y3
</code></pre><span id="more"></span>

<h3 id="eclipse-che"><a href="#eclipse-che" class="headerlink" title="eclipse/che"></a>eclipse/che</h3><pre><code>启动服务
-v /var/…是选择docker文件
-v /opt/…是选择容器存放位置
-e CHE_HOST 设置主机的IP地址

单用户：
docker run -ti --rm --name che6 -v /var/run/docker.sock:/var/run/docker.sock -v /home/zhanghuo/LinuxHome/docker/eclipseche:/data  -e CHE_PORT=8080 -e CHE_HOST=192.168.10.225 eclipse/che:6.19.0 start

多用户：
docker run -ti -e CHE_MULTIUSER=true -v /var/run/docker.sock:/var/run/docker.sock -v /home/zhanghuo/LinuxHome/docker/eclipseche:/data  -e CHE_PORT=8080 -e CHE_HOST=192.168.6.203 eclipse/che:6.19.0 start
实际创建:
docker run -ti -e CHE_MULTIUSER=true -v /var/run/docker.sock:/var/run/docker.sock -v /home/zhanghuo/LinuxHome/docker/eclipseche:/data  -e CHE_PORT=8080  eclipse/che:6.19.0 start</code></pre><h3 id="获取镜像"><a href="#获取镜像" class="headerlink" title="获取镜像"></a>获取镜像</h3><pre><code>~/docker-tags eclipse/che
sudo docker pull eclipse/che:6.19.0</code></pre><h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><pre><code>sudo docker run -it --rm -v /var/run/docker.sock:/var/run/docker.sock -v /home/zhanghuo/LinuxHome/docker/eclipseche:/data eclipse/che:6.19.0 start
启动完毕后，访问 “http://:8080/” 来验证安装。
</code></pre><pre><code>创建 workspace 和 project
访问 “Workspaces -&gt; Add Workspace”；
在 “New Workspace” 页面选择 “java Default Java Stack with JDK 8, Maven and Tomcat.” 然后 “CREATE &amp; OPEN”；
在 “Workspace” 页面，选择 “Create Project…”；
在 “Create New Project” 窗口，选择 Java -&gt; Maven 项目，然后输入一个Name，比如: “test”，并进入下一步；
勾选 “From Archetype:” 并选择 “org.apache.maven.archetypes:maven-archetype-quickstart:RELEASE”，同时输入 “Artifact ID” 和 “Group ID”，然后 “Create” 来创建工程；
运行工程
选中并打开工程，然后在 “Manage commands” 依次创建三个 Maven 命令，并运行。

build
mvn clean install -f $&#123;current.project.path&#125;
1
test
mvn clean test -f $&#123;current.project.path&#125;
1
run
mvn exec:java -Dexec.mainClass=&quot;test.App&quot; -f $&#123;current.project.path&#125;</code></pre><h3 id="eclipse-che-命令-ubuntu"><a href="#eclipse-che-命令-ubuntu" class="headerlink" title="eclipse/che 命令 -ubuntu"></a>eclipse/che 命令 -ubuntu</h3><h5 id="1-apt-get-update"><a href="#1-apt-get-update" class="headerlink" title="1. apt-get update"></a>1. apt-get update</h5><h5 id="2-安装docker-国内源安装"><a href="#2-安装docker-国内源安装" class="headerlink" title="2. 安装docker,国内源安装"></a>2. <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://yeasy.gitbooks.io/docker_practice/content/install/ubuntu.html">安装docker,国内源安装</a></h5><h5 id="3-配置镜像仓库"><a href="#3-配置镜像仓库" class="headerlink" title="3.配置镜像仓库"></a>3.<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://yeasy.gitbooks.io/docker_practice/content/install/mirror.html#ubuntu-1604、debian-8-jessie、centos-7">配置镜像仓库</a></h5><h5 id="4-解决内存溢出的问题"><a href="#4-解决内存溢出的问题" class="headerlink" title="4.解决内存溢出的问题"></a>4.解决内存溢出的问题</h5><pre><code class="javascript">Adjust memory and swap accounting
When users run Docker, they may see these messages when working with an image:

WARNING: Your kernel does not support cgroup swap limit. WARNING: Your
kernel does not support swap limit capabilities. Limitation discarded.
To prevent these messages, enable memory and swap accounting on your system. To enable these on system using GNU GRUB (GNU GRand Unified Bootloader), do the following.

Log into Ubuntu as a user with sudo privileges.

Edit the /etc/default/grub file.

Set the GRUB_CMDLINE_LINUX value as follows:

GRUB_CMDLINE_LINUX=&quot;cgroup_enable=memory swapaccount=1&quot;
Save and close the file.

Update GRUB.

$ sudo update-grub
Reboot your system.</code></pre>
<h5 id="5关闭防火墙"><a href="#5关闭防火墙" class="headerlink" title="5关闭防火墙"></a>5关闭防火墙</h5><p><a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://www.cnblogs.com/wclwcw/p/6140263.html">网络相关配置</a></p>
<pre><code class="javascript">ufw disable</code></pre>
<ul>
<li>安装</li>
</ul>
<pre><code class="javascript">docker pull eclipse/che:5.17.0</code></pre>
<ul>
<li>启动(第一次启动需要下载其他镜像)</li>
</ul>
<pre><code class="javascript">docker run -it --rm -e CHE_PORT=8120 -v /var/run/docker.sock:/var/run/docker.sock -v /c/8120/tmp:/data eclipse/che:5.17.0 start</code></pre>
<ul>
<li>修改che的样式文件，去掉左边导航栏</li>
</ul>
<pre><code class="javascript">docker cp /che/index.html che-8120:/home/user/eclipse-che-5.17.0/tomcat/webapps/dashboard</code></pre>
<ul>
<li>停止</li>
</ul>
<pre><code class="javascript">docker run -it --rm -e CHE_PORT=8120 -v /var/run/docker.sock:/var/run/docker.sock -v /c/8120/tmp:/data eclipse/che:5.17.0 stop</code></pre>
<ul>
<li>重启</li>
</ul>
<pre><code class="javascript">docker run -it --rm -e CHE_PORT=8120 -v /var/run/docker.sock:/var/run/docker.sock -v /c/8120/tmp:/data eclipse/che:5.17.0 restart</code></pre>
<ul>
<li>che API</li>
</ul>
<p>启动che的时候的终端返回信息最后一行是che的api地址</p>
<ul>
<li>创建che工作空间</li>
</ul>
<pre><code class="javascript">curl -X POST -H &#39;Content-Type: application/json&#39; -d &#39;&#123;&quot;name&quot;:&quot;myworkspace&quot;,&quot;projects&quot;:[],&quot;commands&quot;:[&#123;&quot;name&quot;:&quot;build&quot;,&quot;type&quot;:&quot;mvn&quot;,&quot;attributes&quot;:&#123;&quot;goal&quot;:&quot;Build&quot;,&quot;previewUrl&quot;:&quot;&quot;&#125;,&quot;commandLine&quot;:&quot;mvn clean install&quot;],&quot;environments&quot;:&#123;&quot;myworkspace&quot;:&#123;&quot;recipe&quot;:&#123;&quot;location&quot;:&quot;eclipse/ubuntu_jdk8&quot;,&quot;type&quot;:&quot;dockerimage&quot;&#125;,&quot;machines&quot;:&#123;&quot;dev-machine&quot;:&#123;&quot;attributes&quot;:&#123;&quot;memoryLimitBytes&quot;:&quot;2147483648&quot;&#125;,&quot;agents&quot;:[&quot;org.eclipse.che.exec&quot;,&quot;org.eclipse.che.terminal&quot;,&quot;org.eclipse.che.ws-agent&quot;,&quot;org.eclipse.che.ssh&quot;],&quot;servers&quot;:&#123;&#125;&#125;&#125;&#125;&#125;,&quot;defaultEnv&quot;:&quot;myworkspace&quot;,&quot;links&quot;:[]&#125;&#39; http://localhost:8080/api/workspace
//其中-d为创建工作空间所需json参数，具体请看下一小节</code></pre>
<ul>
<li>修改che的运行时环境</li>
</ul>
<p>访问che的webide，点击左侧stacks，在右侧的列表中选择自己需要的运行时环境点进进入详情界面</p>
<p>下拉找到row configuration，复制其中json数据里的workspaceconfig部分代码（注意只取 “workspaceConfig”:后面的{}已经其中的信息），作为访问创建che工作空间api的参数</p>
<ul>
<li>在项目中使用che api需要执行以下命令</li>
</ul>
<pre><code class="javascript">git clone http://github.com/eclipse/che
cd cde
git checkout 5.17.x
cd core
mvn install</code></pre>
<ul>
<li>chedir 初始化工作空间和项目</li>
</ul>
<pre><code class="javascript">cd /ChedirDocker/project
mkdir che8081project
cd che8081project
//创建Chedir文件
docker run -it --rm -e CHE_PORT=8081 -v /var/run/docker.sock:/var/run/docker.sock -v /c/8081/tmp:/data  -v  /ChedirDocker/project/che8081project:/chedir eclipse/che:5.17.0 dir init
//进行相应修改
vim Chedir
//启动容器
/var/run/docker.sock:/var/run/docker.sock -v /c/8081/tmp:/data  -v  /ChedirDocker/project/che8081project:/chedir eclipse/che:5.17.0 dir up
//销毁容器
/var/run/docker.sock:/var/run/docker.sock -v /c/8081/tmp:/data  -v  /ChedirDocker/project/che8081project:/chedir eclipse/che:5.17.0 dir down</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yxzhizhi.github.io/2020/04/05/%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8Eclipse%20Che/" data-id="ckv3t12nj001598pccay5fdf4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/che/" rel="tag">che</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/04/05/sql%20and%20freemaker%20format/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          sql and freemaker format
        
      </div>
    </a>
  
  
    <a href="/2020/04/05/docker/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">docker</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docs/">Docs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/che/">che</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/che/eclipse/">eclipse</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/docker/">docker</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/docker/mysql/">mysql</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/grep/">grep</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/hexo/">hexo</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/mail/">mail</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/mail/back/">back</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/sql/">sql</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/sql/format/">format</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/back/" rel="tag">back</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/che/" rel="tag">che</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/find/" rel="tag">find</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/format/" rel="tag">format</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grep/" rel="tag">grep</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java-docker/" rel="tag">java,docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plugins/" rel="tag">plugins</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/back/" style="font-size: 10px;">back</a> <a href="/tags/che/" style="font-size: 10px;">che</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/find/" style="font-size: 10px;">find</a> <a href="/tags/format/" style="font-size: 10px;">format</a> <a href="/tags/grep/" style="font-size: 10px;">grep</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/java-docker/" style="font-size: 10px;">java,docker</a> <a href="/tags/linux/" style="font-size: 20px;">linux</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/plugins/" style="font-size: 10px;">plugins</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/15/python-gui/">python-gui</a>
          </li>
        
          <li>
            <a href="/2020/05/01/firefox-dev/">firefox dev</a>
          </li>
        
          <li>
            <a href="/2020/04/19/Docker-Flink/">Docker Flink</a>
          </li>
        
          <li>
            <a href="/2020/04/19/windows10%20node%20%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/">windows node 环境安装</a>
          </li>
        
          <li>
            <a href="/2020/04/19/docker-spark-hadoop/">docker spark+hadoop</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 zhanghuo<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>