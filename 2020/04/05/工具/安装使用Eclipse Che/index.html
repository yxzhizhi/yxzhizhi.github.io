<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	
	<!-- title -->
	
	<title>
	
		eclipse/che | 
	 
	yxzhizhiの博客
	</title>
	
	<!-- keywords,description -->
	
		<meta name="keywords" content="linux,java,python,node,web" />
	 
		<meta name="description" content="生命不是要超越别人，而是要超越自己" />
	

	<!-- favicon -->
	
	<link rel="shortcut icon" href="/favicon.ico">
	


	<!-- search -->
	<script>
		var searchEngine = "https://www.google.com/search?q=";
		if(typeof searchEngine == "undefined" || searchEngine == null || searchEngine == ""){
			searchEngine = "https://www.google.com/search?q=";
		}
		var homeHost = "wujun234.github.io";
		if(typeof homeHost == "undefined" || homeHost == null || homeHost == ""){
			homeHost = window.location.host;
		}
	</script>


	
<link rel="stylesheet" href="/css/main.css">

	
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">

	
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/darcula.min.css">

	
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">


	
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>

	
<script src="/js/main.js"></script>

	
		
<script src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>

		
<script src="https://cdn.jsdelivr.net/npm/valine@v1.4.14/dist/Valine.min.js"></script>

	
	
		<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="yxzhizhiの博客" type="application/atom+xml">
</head>

<body>
	<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?3efe99c287df5a1d6f0d02d187e403c1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<header id="header">
    <a id="title" href="/" class="logo">yxzhizhiの博客</a>

	<ul id="menu">
		<li class="menu-item">
			<a href="/about" class="menu-item-link">ABOUT</a>
		</li>
	

	

		<li class="menu-item">
			<a href="https://github.com/wujun234/uid-generator-spring-boot-starter" class="menu-item-link" target="_blank">
				UidGenerator
			</a>
		</li>
		<li class="menu-item">
			<a href="https://github.com/wujun234" class="menu-item-link" target="_blank">
				<i class="fa fa-github fa-2x"></i>
			</a>
		</li>
	</ul>
</header>

	
<div id="sidebar">
	<button id="sidebar-toggle" class="toggle" ><i class="fa fa-arrow-right " aria-hidden="true"></i></button>
	
	<div id="site-toc">
		<input id="search-input" class="search-input" type="search" placeholder="按回车全站搜索">
		<div id="tree">
			

			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										备忘
									</a>
									
							<ul>
								<li class="file">
									<a href="/2020/04/05/%E5%A4%87%E5%BF%98/126%E9%82%AE%E7%AE%B1/">
										126邮箱
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/07/%E5%A4%87%E5%BF%98/Markdown-%E8%AF%AD%E6%B3%95%E6%89%8B%E5%86%8C-%EF%BC%88%E5%AE%8C%E6%95%B4%E6%95%B4%E7%90%86%E7%89%88%EF%BC%89/">
										Markdown-语法手册-（完整整理版）
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/01/01/%E5%A4%87%E5%BF%98/hexo/">
										hexo
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										工具
									</a>
									
							<ul>
								<li class="file">
									<a href="/2021/10/23/%E5%B7%A5%E5%85%B7/hexo-image/">
										hexo-image
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/05/%E5%B7%A5%E5%85%B7/%E4%BD%BF%E7%94%A8%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3/">
										使用帮助文档
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file active">
									<a href="/2020/04/05/%E5%B7%A5%E5%85%B7/%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8Eclipse%20Che/">
										安装使用Eclipse Che
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										开发
									</a>
									
							<ul>
								<li class="file">
									<a href="/2020/04/05/%E5%BC%80%E5%8F%91/docker/">
										docker
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/05/%E5%BC%80%E5%8F%91/find_grep/">
										find_grep
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/05/01/%E5%BC%80%E5%8F%91/firefox-dev/">
										firefox-dev
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/09/%E5%BC%80%E5%8F%91/git%E5%B8%B8%E7%94%A8/">
										git常用
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/05/%E5%BC%80%E5%8F%91/sql%20and%20freemaker%20format/">
										sql and freemaker format
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/05/%E5%BC%80%E5%8F%91/%E5%B8%B8%E7%94%A8Linux%20%E5%91%BD%E4%BB%A4/">
										常用Linux 命令
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										环境
									</a>
									
							<ul>
								<li class="file">
									<a href="/2020/04/05/%E7%8E%AF%E5%A2%83/Docker%E6%90%AD%E5%BB%BAMySQL%E6%9C%8D%E5%8A%A1/">
										Docker搭建MySQL服务
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/09/%E7%8E%AF%E5%A2%83/conda-%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/">
										conda-虚拟环境
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/06/%E7%8E%AF%E5%A2%83/java-deploy-to-docker/">
										java-deploy-to-docker
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/18/%E7%8E%AF%E5%A2%83/openstack-%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F/">
										openstack-部署方式
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/18/%E7%8E%AF%E5%A2%83/ubuntu-%E5%88%A0%E9%99%A4%E8%BD%AF%E4%BB%B6/">
										ubuntu-删除软件
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/19/%E7%8E%AF%E5%A2%83/vritubox-ubuntu-init/">
										vritubox-ubuntu-init
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/19/%E7%8E%AF%E5%A2%83/windows10%20node%20%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/">
										windows10 node 环境安装
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2020/04/12/%E7%8E%AF%E5%A2%83/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/">
										学习计划
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										设计
									</a>
									
							<ul>
								<li class="file">
									<a href="/2020/01/01/%E8%AE%BE%E8%AE%A1/%E4%BB%8E0%E5%BC%80%E5%A7%8B%E5%AD%A6%E6%9E%B6%E6%9E%84/">
										从0开始学架构
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
		</div>
	</div>
</div>

	<!-- 引入正文 -->
	<div id="content">
		<h1 id="article-title">
	eclipse/che
</h1>
<div class="article-meta">
	
	<span>zhanghuo</span>
	<span>2020-04-05 00:00:00</span>
		<div id="article-categories">
    
		<span>Categories：</span>
            
                
                    <span>
                        <i class="fa fa-folder" aria-hidden="true">
                        <a href="/categories/linux/">linux</a>
                        </i>
                      
                        >
                      
                    </span>
                
            
                
                    <span>
                        <i class="fa fa-folder" aria-hidden="true">
                        <a href="/categories/linux/che/">che</a>
                        </i>
                      
                        >
                      
                    </span>
                
            
                
                    <span>
                        <i class="fa fa-folder" aria-hidden="true">
                        <a href="/categories/linux/che/eclipse/">eclipse</a>
                        </i>
                      
                    </span>
                
            
    

    
		<span>Tags：</span>
            
                
                    <span>
                        <i class="fa fa-tag" aria-hidden="true">
                        <a href="/tags/che/">che</a>
                        </i>
                    </span>
                
            
    
		</div>

</div>

<div id="article-content">
	<h3 id="portainer"><a href="#portainer" class="headerlink" title="portainer"></a>portainer</h3><pre><code>下载镜像
docker pull portainer/portainer
基于镜像运行容器

docker run -d -p 9000:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --name prtainer  portainer/portainer
http://172.17.0.1:8080/dashboard/#/ide/che/wksp-tvqq
http://127.0.0.1:9000/#/networks
up: admin/y3
</code></pre><span id="more"></span>

<h3 id="eclipse-che"><a href="#eclipse-che" class="headerlink" title="eclipse/che"></a>eclipse/che</h3><pre><code>启动服务
-v /var/…是选择docker文件
-v /opt/…是选择容器存放位置
-e CHE_HOST 设置主机的IP地址

单用户：
docker run -ti --rm --name che6 -v /var/run/docker.sock:/var/run/docker.sock -v /home/zhanghuo/LinuxHome/docker/eclipseche:/data  -e CHE_PORT=8080 -e CHE_HOST=192.168.10.225 eclipse/che:6.19.0 start

多用户：
docker run -ti -e CHE_MULTIUSER=true -v /var/run/docker.sock:/var/run/docker.sock -v /home/zhanghuo/LinuxHome/docker/eclipseche:/data  -e CHE_PORT=8080 -e CHE_HOST=192.168.6.203 eclipse/che:6.19.0 start
实际创建:
docker run -ti -e CHE_MULTIUSER=true -v /var/run/docker.sock:/var/run/docker.sock -v /home/zhanghuo/LinuxHome/docker/eclipseche:/data  -e CHE_PORT=8080  eclipse/che:6.19.0 start</code></pre><h3 id="获取镜像"><a href="#获取镜像" class="headerlink" title="获取镜像"></a>获取镜像</h3><pre><code>~/docker-tags eclipse/che
sudo docker pull eclipse/che:6.19.0</code></pre><h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><pre><code>sudo docker run -it --rm -v /var/run/docker.sock:/var/run/docker.sock -v /home/zhanghuo/LinuxHome/docker/eclipseche:/data eclipse/che:6.19.0 start
启动完毕后，访问 “http://:8080/” 来验证安装。
</code></pre><pre><code>创建 workspace 和 project
访问 “Workspaces -&gt; Add Workspace”；
在 “New Workspace” 页面选择 “java Default Java Stack with JDK 8, Maven and Tomcat.” 然后 “CREATE &amp; OPEN”；
在 “Workspace” 页面，选择 “Create Project…”；
在 “Create New Project” 窗口，选择 Java -&gt; Maven 项目，然后输入一个Name，比如: “test”，并进入下一步；
勾选 “From Archetype:” 并选择 “org.apache.maven.archetypes:maven-archetype-quickstart:RELEASE”，同时输入 “Artifact ID” 和 “Group ID”，然后 “Create” 来创建工程；
运行工程
选中并打开工程，然后在 “Manage commands” 依次创建三个 Maven 命令，并运行。

build
mvn clean install -f $&#123;current.project.path&#125;
1
test
mvn clean test -f $&#123;current.project.path&#125;
1
run
mvn exec:java -Dexec.mainClass=&quot;test.App&quot; -f $&#123;current.project.path&#125;</code></pre><h3 id="eclipse-che-命令-ubuntu"><a href="#eclipse-che-命令-ubuntu" class="headerlink" title="eclipse/che 命令 -ubuntu"></a>eclipse/che 命令 -ubuntu</h3><h5 id="1-apt-get-update"><a href="#1-apt-get-update" class="headerlink" title="1. apt-get update"></a>1. apt-get update</h5><h5 id="2-安装docker-国内源安装"><a href="#2-安装docker-国内源安装" class="headerlink" title="2. 安装docker,国内源安装"></a>2. <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://yeasy.gitbooks.io/docker_practice/content/install/ubuntu.html">安装docker,国内源安装</a></h5><h5 id="3-配置镜像仓库"><a href="#3-配置镜像仓库" class="headerlink" title="3.配置镜像仓库"></a>3.<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=https://yeasy.gitbooks.io/docker_practice/content/install/mirror.html#ubuntu-1604、debian-8-jessie、centos-7">配置镜像仓库</a></h5><h5 id="4-解决内存溢出的问题"><a href="#4-解决内存溢出的问题" class="headerlink" title="4.解决内存溢出的问题"></a>4.解决内存溢出的问题</h5><pre><code class="javascript">Adjust memory and swap accounting
When users run Docker, they may see these messages when working with an image:

WARNING: Your kernel does not support cgroup swap limit. WARNING: Your
kernel does not support swap limit capabilities. Limitation discarded.
To prevent these messages, enable memory and swap accounting on your system. To enable these on system using GNU GRUB (GNU GRand Unified Bootloader), do the following.

Log into Ubuntu as a user with sudo privileges.

Edit the /etc/default/grub file.

Set the GRUB_CMDLINE_LINUX value as follows:

GRUB_CMDLINE_LINUX=&quot;cgroup_enable=memory swapaccount=1&quot;
Save and close the file.

Update GRUB.

$ sudo update-grub
Reboot your system.</code></pre>
<h5 id="5关闭防火墙"><a href="#5关闭防火墙" class="headerlink" title="5关闭防火墙"></a>5关闭防火墙</h5><p><a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://www.cnblogs.com/wclwcw/p/6140263.html">网络相关配置</a></p>
<pre><code class="javascript">ufw disable</code></pre>
<ul>
<li>安装</li>
</ul>
<pre><code class="javascript">docker pull eclipse/che:5.17.0</code></pre>
<ul>
<li>启动(第一次启动需要下载其他镜像)</li>
</ul>
<pre><code class="javascript">docker run -it --rm -e CHE_PORT=8120 -v /var/run/docker.sock:/var/run/docker.sock -v /c/8120/tmp:/data eclipse/che:5.17.0 start</code></pre>
<ul>
<li>修改che的样式文件，去掉左边导航栏</li>
</ul>
<pre><code class="javascript">docker cp /che/index.html che-8120:/home/user/eclipse-che-5.17.0/tomcat/webapps/dashboard</code></pre>
<ul>
<li>停止</li>
</ul>
<pre><code class="javascript">docker run -it --rm -e CHE_PORT=8120 -v /var/run/docker.sock:/var/run/docker.sock -v /c/8120/tmp:/data eclipse/che:5.17.0 stop</code></pre>
<ul>
<li>重启</li>
</ul>
<pre><code class="javascript">docker run -it --rm -e CHE_PORT=8120 -v /var/run/docker.sock:/var/run/docker.sock -v /c/8120/tmp:/data eclipse/che:5.17.0 restart</code></pre>
<ul>
<li>che API</li>
</ul>
<p>启动che的时候的终端返回信息最后一行是che的api地址</p>
<ul>
<li>创建che工作空间</li>
</ul>
<pre><code class="javascript">curl -X POST -H &#39;Content-Type: application/json&#39; -d &#39;&#123;&quot;name&quot;:&quot;myworkspace&quot;,&quot;projects&quot;:[],&quot;commands&quot;:[&#123;&quot;name&quot;:&quot;build&quot;,&quot;type&quot;:&quot;mvn&quot;,&quot;attributes&quot;:&#123;&quot;goal&quot;:&quot;Build&quot;,&quot;previewUrl&quot;:&quot;&quot;&#125;,&quot;commandLine&quot;:&quot;mvn clean install&quot;],&quot;environments&quot;:&#123;&quot;myworkspace&quot;:&#123;&quot;recipe&quot;:&#123;&quot;location&quot;:&quot;eclipse/ubuntu_jdk8&quot;,&quot;type&quot;:&quot;dockerimage&quot;&#125;,&quot;machines&quot;:&#123;&quot;dev-machine&quot;:&#123;&quot;attributes&quot;:&#123;&quot;memoryLimitBytes&quot;:&quot;2147483648&quot;&#125;,&quot;agents&quot;:[&quot;org.eclipse.che.exec&quot;,&quot;org.eclipse.che.terminal&quot;,&quot;org.eclipse.che.ws-agent&quot;,&quot;org.eclipse.che.ssh&quot;],&quot;servers&quot;:&#123;&#125;&#125;&#125;&#125;&#125;,&quot;defaultEnv&quot;:&quot;myworkspace&quot;,&quot;links&quot;:[]&#125;&#39; http://localhost:8080/api/workspace
//其中-d为创建工作空间所需json参数，具体请看下一小节</code></pre>
<ul>
<li>修改che的运行时环境</li>
</ul>
<p>访问che的webide，点击左侧stacks，在右侧的列表中选择自己需要的运行时环境点进进入详情界面</p>
<p>下拉找到row configuration，复制其中json数据里的workspaceconfig部分代码（注意只取 “workspaceConfig”:后面的{}已经其中的信息），作为访问创建che工作空间api的参数</p>
<ul>
<li>在项目中使用che api需要执行以下命令</li>
</ul>
<pre><code class="javascript">git clone http://github.com/eclipse/che
cd cde
git checkout 5.17.x
cd core
mvn install</code></pre>
<ul>
<li>chedir 初始化工作空间和项目</li>
</ul>
<pre><code class="javascript">cd /ChedirDocker/project
mkdir che8081project
cd che8081project
//创建Chedir文件
docker run -it --rm -e CHE_PORT=8081 -v /var/run/docker.sock:/var/run/docker.sock -v /c/8081/tmp:/data  -v  /ChedirDocker/project/che8081project:/chedir eclipse/che:5.17.0 dir init
//进行相应修改
vim Chedir
//启动容器
/var/run/docker.sock:/var/run/docker.sock -v /c/8081/tmp:/data  -v  /ChedirDocker/project/che8081project:/chedir eclipse/che:5.17.0 dir up
//销毁容器
/var/run/docker.sock:/var/run/docker.sock -v /c/8081/tmp:/data  -v  /ChedirDocker/project/che8081project:/chedir eclipse/che:5.17.0 dir down</code></pre>

</div>


    <div class="post-guide">
        <div class="item left">
            
              <a href="/2020/04/05/%E5%BC%80%E5%8F%91/%E5%B8%B8%E7%94%A8Linux%20%E5%91%BD%E4%BB%A4/">
                  <i class="fa fa-angle-left" aria-hidden="true"></i>
                  Linux和Docker常用命令
              </a>
            
        </div>
        <div class="item right">
            
              <a href="/2020/04/05/%E7%8E%AF%E5%A2%83/Docker%E6%90%AD%E5%BB%BAMySQL%E6%9C%8D%E5%8A%A1/">
                Docker搭建MySQL服务
                <i class="fa fa-angle-right" aria-hidden="true"></i>
              </a>
            
        </div>
    </div>



	<div id="vcomments"></div>


<script>
	
		// 评论
		new Valine({
			el: '#vcomments',
			appId: '',
			appKey: '',
			placeholder: '请输入评论',
			path: window.location.pathname,
			avatar: 'retro',
			highlight: false,
      recordIP: true,
      enableQQ: true,
			requiredFields: ['nick','mail']
		})
	
	
</script>
	</div>
	<div id="footer">
	<p>
	©2019-<span id="footerYear"></span> 
	<a href="/">zhanghuo</a> 
	
	
		|
		<span id="busuanzi_container_site_pv">
			pv
			<span id="busuanzi_value_site_pv"></span>
		</span>
		|
		<span id="busuanzi_container_site_uv"> 
			uv
			<span id="busuanzi_value_site_uv"></span>
		</span>
	
	<br>
	Theme <a href="//github.com/wujun234/hexo-theme-tree" target="_blank">Tree</a>
	by <a href="//github.com/wujun234" target="_blank">WuJun</a>
	Powered by <a href="//hexo.io" target="_blank">Hexo</a>
	</p>
</div>
<script type="text/javascript"> 
	document.getElementById('footerYear').innerHTML = new Date().getFullYear() + '';
</script>
	<button id="totop-toggle" class="toggle"><i class="fa fa-angle-double-up" aria-hidden="true"></i></button>
</body>
</html>